pre-commit:
  commands:
    # eslint:
    #   glob: "*.{ts,tsx}"
    #   run: npx eslint {staged_files} --fix --max-warnings 0
    #   stage_fixed: true

    prettier:
      glob: "*.{ts,tsx,js,jsx,mts}"
      run: pnpx prettier --write {staged_files}
      stage_fixed: true

    # Check for TODO/FIXME comments
    # todo-check:
    #   glob: "*.{ts,tsx,js,jsx}"
    #   run: |
    #     if grep -n "TODO\|FIXME" {staged_files}; then
    #       echo "⚠️  TODO/FIXME comments found. Consider addressing them."
    #       echo "If intentional, add --no-verify to bypass this check."
    #     fi

  scripts:
    "lint-staged":
      runner: pnpm lint-staged

pre-push:
  commands:
    typescript:
      run: pnpm typecheck
      fail_text: "❌ TypeScript type checking failed"

    # eslint-all:
    #   run: npm run lint
    #   fail_text: "❌ ESLint failed"

    db-check:
      glob: "db/schema/*.{ts,js}"
      run: pnpm db:check
      fail_text: "❌ Database schema validation failed"

  parallel: true

skip_output:
  - meta
  - execution

colors: true
